
<!--
 *  Copyright (c) 2013 Ansible, Inc.
 *
 *  ratingListTable.html
 *
 *  Display ratings in a TB formatted table.
 *
 *
-->

<table class="role__ratings-list">
    <tbody>
        <tr ng-repeat="rating in ratings">
            <td class="rating__avatar txt-top">
                <div ng-show="showRoleName">
                    <a class="rolename" href="#/roles/{{rating.summary_fields.role.id}}">{{rating.summary_fields.role.name}}</a>
                    <!-- <div class="username">
                        <span class="fld-label">Rated by</span>
                        <a class="username" href="#/users/{{rating.summary_fields.role.owner_id}}">{{rating.summary_fields.role.owner_username}}</a>
                    </div> -->
                </div>
                <dl ng-hide="showRoleName" class="avatar">
                    <dd>
                        <img ng-src="{{ rating.summary_fields.owner.avatar_url }}" >
                    </dd>
                    <dt>
                        <a class="username" href="#/users/{{rating.summary_fields.owner.id}}">
                            {{rating.summary_fields.owner.username}}
                        </a>
                    </dt>
                    <p><br />
                    <span ng-show="rating.staff_rating" class="staff-marker"><i class="fa fa-asterisk"></i> Ansible Staff</span></p>
                </dl>
                <div class="staff" ng-show="my_info.staff">
                    <p><a class="btn btn-danger btn-xs" href ng-click="staffDeleteRating(rating.id)"><i class="fa fa-trash-o"></i> Delete</a></p>
                </div>
            </td>
            <td>
                <div class="rating__scores">
                <table>
                    <tbody>
                        <tr class="primary-score" ng-mouseenter="ratingHover($index,'score',true)" ng-mouseleave="ratingHover($index,'score',false)">
                            <td>Overall Score</td>
                            <td><i ng-repeat="itm in rating.score_range" class="{{ itm.value }}"></i>
                                <span class="badge" ng-show="score_hover_{{ $index }}">{{ rating.score | number:1 }}</span>
                            </td>
                        </tr>
                        <tr ng-mouseenter="ratingHover($index,'wow_factor',true)" ng-mouseleave="ratingHover($index,'wow_factor',false)">
                            <td>Wow! Factor</td>
                            <td><i ng-repeat="itm in rating.wow_factor_range" class="{{ itm.value }}"></i>
                                <span class="badge" ng-show="wow_factor_hover_{{ $index }}">{{ rating.wow_factor | number:1 }}</span>
                            </td>
                        </tr>
                        <tr ng-mouseenter="ratingHover($index,'documentation',true)" ng-mouseleave="ratingHover($index,'documentation',false)">
                            <td>Documentation</td>
                            <td><i ng-repeat="itm in rating.documentation_range" class="{{ itm.value }}"></i>
                                <span class="badge" ng-show="documentation_hover_{{ $index }}">{{ rating.documentation | number:1 }}</span>
                            </td>
                        </tr>
                        <tr ng-mouseenter="ratingHover($index,'reliability',true)" ng-mouseleave="ratingHover($index,'reliability',false)">
                            <td>Reliability</td>
                            <td><i ng-repeat="itm in rating.reliability_range" class="{{ itm.value }}"></i>
                                <span class="badge" ng-show="reliability_hover_{{ $index }}">{{ rating.reliability | number:1 }}</span>
                            </td>
                        </tr>
                        <tr ng-mouseenter="ratingHover($index,'code_quality',true)" ng-mouseleave="ratingHover($index,'code_quality',false)">
                            <td>Code Quality</td>
                            <td><i ng-repeat="itm in rating.code_quality_range" class="{{ itm.value }}"></i>
                                <span class="badge" ng-show="code_quality_hover_{{ $index }}">{{ rating.code_quality | number:1 }}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </div>

                <div class="rating__comment">{{ rating.comment }}</div>
                <div class="dates">
                    <div class="date">
                        <span class="fld-label">Created on:</span>
                        <span class="value">{{rating.created|date:"short"}}</span>
                    </div>
                    <div class="date" ng-show="rating.created != rating.modified">
                        <span class="fld-label">Modified:</span>
                        <span class="value">{{rating.modified|date:"short"}}</span>
                    </div>
                </div>
                <div class="votes" ng-show="my_info.authenticated && my_info.id != rating.summary_fields.owner.id">
                    <h5>Was this rating helpful?</h5>
                    <div class="vote">
                        <span class="fld-label"><a href ng-click="addVote(rating.id,'up')"><i class="fa fa-thumbs-up"></i></a> Up Votes</span>
                        <span class="value">{{ rating.num_up_votes | number:0 }}</span>
                    </div>
                    <div class="vote">
                        <span class="fld-label"><a href ng-click="addVote(rating.id,'down')"><i class="fa fa-thumbs-down"></i></a> Down Votes</span>
                        <span class="value">{{ rating.num_down_votes | number:0 }}</span>
                    </div>
                </div>
                <div class="votes" ng-show="my_info.id == rating.summary_fields.owner.id">
                    <div class="vote">
                        <span class="fld-label"><i class="fa fa-thumbs-up"></i> Up Votes</span>
                        <span class="value">{{ rating.num_up_votes | number:0 }}</span>
                    </div>
                    <div class="vote">
                        <span class="fld-label"><i class="fa fa-thumbs-down"></i> Down Votes</span>
                        <span class="value">{{ rating.num_down_votes | number:0 }}</span>
                    </div>
                </div>
            </td>
        </tr>
        <tr ng-hide="ratings">
            <td colspan="2" ng-show="user">This user has not rated any roles</td>
            <td colspan="2" ng-show="role">There are no ratings for ths role.</td>
        </tr>
    </tbody>

</table>
<div id="review-role" ng-show="role" rating-form role="role"></div>
<div ng-show="ratings" ng-init="target='ratings'; list_data=list_data.ratings">
    <ng-include src="'/static/partials/paginateWidget.html'"></ng-include>
</div>
