var mainApp=angular.module("mainApp","ngRoute ngSanitize ngCookies mainControllers categoryServices roleServices userServices".split(" "));mainApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"/static/partials/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]);"use strict";var mainControllers=angular.module("mainControllers",[]);
mainControllers.controller("MainCtrl",["$scope","roleFactory","userFactory","categoryFactory",function(a,d,c,b){a.page_title="Explore";a.results_per_page=10;a.loading=0;a.data_names="categories top_roles new_roles top_users top_reviewers new_users".split(" ");a.restore_state=function(){a.data_names.forEach(function(g){console.log("entry is "+g);var b="",c="",e=null;"categories"==g?(b="num_roles",c="/list#/roles/",e=a.getCategories):"top_roles"==g?(b="average_score",c="/list#/roles/sort/sort-by-community-score",
e=a.getTopRoles):"new_roles"==g?(b="created",c="/list#/roles/sort/sort-by-created-on-date",e=a.getNewRoles):"top_users"==g?(b="avg_role_score",c="/list#/users/sort/sort-by-community-score",e=a.getTopUsers):"top_reviewers"==g?(b="karma",c="/list#/users/sort/sort-by-top-reviewers",e=a.getTopReviewers):"new_users"==g&&(b="date_joined",c="/list#/users/sort/sort-by-joined-on-date",e=a.getNewUsers);a[g]={page:1,data:[],sort_col:b,reverse:!0,more_link:c,data_function:e}})};a.removeSaveState&&a.removeSaveState();
a.removeSaveState=a.$on("saveState",function(a,b){});a.toggle_item=function(a,b){a.sort_col!=b&&(a.sort_col=b,a.data_function())};a.getCategories=function(){b.getCategories(a.categories.sort_col,a.categories.reverse).success(function(b){a.categories.data=b.slice(0,a.results_per_page);a.$emit("saveState","categories")}).error(function(a){})};a.getTopRoles=function(){d.getLatest(a.top_roles.page,a.results_per_page,a.top_roles.sort_col,a.top_roles.reverse).success(function(b){a.top_roles.data=b.results;
a.$emit("saveState","top_roles")}).error(function(a){})};a.getNewRoles=function(){d.getLatest(a.new_roles.page,a.results_per_page,a.new_roles.sort_col,a.new_roles.reverse).success(function(b){a.new_roles.data=b.results;a.$emit("saveState","new_roles")}).error(function(a){})};a.getTopUsers=function(){c.getUsers(a.top_users.page,a.results_per_page,a.top_users.sort_col,a.top_users.reverse).success(function(b){a.top_users.data=b.results;a.$emit("saveState","top_users")}).error(function(a){})};a.getTopReviewers=
function(){c.getUsers(a.top_reviewers.page,a.results_per_page,a.top_reviewers.sort_col,a.top_reviewers.reverse).success(function(b){a.top_reviewers.data=b.results;a.$emit("saveState","top_reviewers")}).error(function(a){})};a.getNewUsers=function(){c.getUsers(a.new_users.page,a.results_per_page,a.new_users.sort_col,a.new_users.reverse).success(function(b){a.new_users.data=b.results;a.$emit("saveState","new_users")}).error(function(a){})};a.restore_state();a.getCategories();a.getTopRoles();a.getNewRoles();
a.getTopUsers();a.getTopReviewers();a.getNewUsers()}]);"use strict";var roleServices=angular.module("roleServices",["ngResource"]);
roleServices.factory("roleFactory",["$http","$cookies",function(a,d){var c={};a.defaults.headers.common["X-CSRFToken"]=d.csrftoken;c.getRoles=function(b,c,d,f,e,l){b="/api/v1/roles/?page="+b+"&page_size="+d;if(0<c.length)for(var m in c)b+="&chain__categories__name="+c[m];e&&""!=e&&(b+="&name__icontains="+e);if(l){c=f.split(",");for(var k in c)c[k]="-"+c[k];f=c.join(",")}return a.get(b+("&order_by="+f))};c.getRole=function(b){return a.get("/api/v1/roles/"+b+"/")};c.getLatest=function(a,d,h,f){f&&(h=
"-"+h);return c.getRoles(a,[],d,h)};c.deleteRole=function(b){return a.delete("/api/v1/roles/"+b+"/")};return c}]);"use strict";var categoryServices=angular.module("categoryServices",["ngResource"]);categoryServices.factory("categoryFactory",["$http",function(a){return{getCategories:function(d,c){var b="/api/v1/categories/?";return a.get(c?b+("order_by=-"+d):b+("order_by="+d))}}}]);"use strict";var userServices=angular.module("userServices",["ngResource"]);
userServices.factory("userFactory",["$http","$cookies",function(a,d){var c={};a.defaults.headers.common["X-CSRFToken"]=d.csrftoken;c.getUsers=function(b,c,d,f,e){f&&(d="-"+d);b="/api/v1/users/?page="+b+"&page_size="+c+("&order_by="+d);e&&""!=e&&(b+="&or__username__icontains="+e+"&or__full_name__icontains="+e);return a.get(b)};c.getUser=function(b){return a.get("/api/v1/users/"+b)};c.getUserRelated=function(b,c,d,f,e){e&&(f="-"+f);b=b+"?page="+c+"&page_size="+d+("&order_by="+f);return a.get(b)};c.deleteUser=
function(b){return a.delete("/api/v1/users/"+b+"/")};return c}]);
angular.module("Utilities",[]).factory("Empty",[function(){return function(a){return void 0===a||null===a||""===a?!0:!1}}]).factory("Range",[function(){return function(a,d){for(var c=[],b=0;b<a;b++)c.push({id:b,value:d});return c}}]).factory("Stars",[function(){return function(a){var d=[];a=parseFloat(a);for(var c=Math.floor(a),b=0;b<c;b++)d.push({id:b,value:"fa fa-star"});0<a%1&&d.push({id:b,value:"fa fa-star-half-o"});for(b=d.length;5>b;b++)d.push({id:b,value:"fa fa-star-o"});return d}}]);
