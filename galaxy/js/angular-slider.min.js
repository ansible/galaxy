angular.module('ui.slider',[]).value('uiSliderConfig',{}).directive('uiSlider',['uiSliderConfig','$timeout',function(uiSliderConfig,$timeout){uiSliderConfig=uiSliderConfig||{};return{require:'ngModel',compile:function(){return function(scope,elm,attrs,ngModel){function parseNumber(n,decimals){return(decimals)?parseFloat(n):parseInt(n)};var options=angular.extend(scope.$eval(attrs.uiSlider)||{},uiSliderConfig);var prevRangeValues={min:null,max:null};var init=function(){if(angular.isArray(ngModel.$viewValue)&&options.range!==true){console.warn('Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.');options.range=true}elm.slider(options);init=angular.noop};var properties=['min','max','step'];var useDecimals=(!angular.isUndefined(attrs.useDecimals))?true:false;angular.forEach(properties,function(property,i){attrs.$observe(property,function(newVal){if(!!newVal){init();elm.slider('option',property,parseNumber(newVal,useDecimals))}})});attrs.$observe('disabled',function(newVal){init();elm.slider('option','disabled',!!newVal)});scope.$watch(attrs.uiSlider,function(newVal){init();elm.slider('option',newVal)},true);$timeout(init,0,true);elm.bind('slide',function(event,ui){ngModel.$setViewValue(ui.values||ui.value);scope.$apply()});ngModel.$render=function(){init();var method=options.range===true?'values':'value';if(isNaN(ngModel.$viewValue))ngModel.$viewValue=0;if(options.range===true){if(angular.isDefined(options.min)&&options.min>ngModel.$viewValue[0]){ngModel.$viewValue[0]=options.min}if(angular.isDefined(options.max)&&options.max<ngModel.$viewValue[1]){ngModel.$viewValue[1]=options.max}if(ngModel.$viewValue[0]>=ngModel.$viewValue[1]){if(prevRangeValues.min>=ngModel.$viewValue[1])ngModel.$viewValue[0]=prevRangeValues.min;if(prevRangeValues.max<=ngModel.$viewValue[0])ngModel.$viewValue[1]=prevRangeValues.max}prevRangeValues.min=ngModel.$viewValue[0];prevRangeValues.max=ngModel.$viewValue[1]}elm.slider(method,ngModel.$viewValue)};scope.$watch(attrs.ngModel,function(){if(options.range===true){ngModel.$render()}},true);function destroy(){elm.slider('destroy')}elm.bind('$destroy',destroy)}}}}]);
